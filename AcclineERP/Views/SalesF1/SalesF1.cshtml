@model App.Domain.ViewModel.SalesF1VM
@{
    ViewBag.Title = "SalesF1";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/App_Themes/Theme1/plugins/datatables/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
<link href="~/App_Themes/Theme1/plugins/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
<link href="~/App_Themes/Theme1/plugins/datatables/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
<link href="~/App_Themes/Theme1/plugins/select2/select2.css" rel="stylesheet" type="text/css" />
<link href="~/Css/FormDesign.css" rel="stylesheet" />

<style>
    table.dataTable.select tbody tr,
    table.dataTable thead th:first-child {
        cursor: pointer;
    }

    .dataTables_scrollBody > table > thead > tr > th[class*="sort"]::after {
        display: none;
    }

    input#NetAmount, input#PrevDue, input#AdditionalAmt, input#DiscAmt, input#VATAmt, input#TotSaleAmt, input#NetSaleAmt {
        text-align: right;
    }

    .form-control {
        border: 1px solid #00ffff;
    }

    .required:after {
        content: " *";
        font-weight: bold;
        color: red;
    }

    a#glPro {
        color: darkblue;
    }

    a#GLEntries {
        color: darkblue;
    }

    label.col-md-4 {
        padding: 0px !important;
    }

    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
</style>

@using (Html.BeginForm())
{
    <div class="row">
        <div class="col-sm-12">
            <div class="panel panel-color panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <text style="text-align:left !important; text-decoration: none;">Sales</text>
                    </h3>
                </div>
                <div class="panel-body">
                    <div class="input-group form-group col-md-12">
                        <div class="col-md-4" style="text-align:right">
                            <label class="col-md-4"></label>
                            <label class="col-md-6 control-label" style="padding-left:initial; text-align:right">
                                @Html.ActionLink(
                                "Sales waiting for Posting",
                                "GetJournalVoucher",
                                "Sales",
                                new { Date = "blankDate" },
                                new { id = "glPro", }
                                )
                            </label>
                            <label class="col-md-2 control-label" style="padding-left:initial; padding-right:initial; text-align:left" id="CountNo">(@ViewBag.GLProvition)</label>
                        </div>
                        <div class="col-md-4" style="text-align:left">
                            <label class="control-label" target="_blank">
                                @Html.ActionLink(
                                "List of Sales Voucher",
                                "GetGLEntries",
                                "Sales",
                                new { Date = "blankDate" },
                                new { id = "GLEntries", }
                                )
                            </label>
                            <label>(@ViewBag.GLEntries)</label>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="col-md-4">
                            <label class="col-md-5"></label>
                            <div class="col-md-7 checkbox checkbox-primary">
                                <input type="checkbox" name="AutoChallan" class="AutoChallan" required="required" value="AutoChallan" id="AutoChallan" /><label>Make Challan Automatically</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="col-md-8 checkbox checkbox-primary">
                                <input type="checkbox" name="WithoutInv" class="WithoutInv" value="WithoutInv" id="WithoutInv" /><label>With Out Invoice</label>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-12">
                        <div class="col-sm-6">
                            <div class="col-sm-12">
                                <label class="col-sm-3 required">Location</label>
                                <div class="input-group form-group col-sm-9">
                                    @Html.DropDownListFor(x => x.LocCode, null, new { @class = "form-control select2", @Value = ViewBag.LocCode })
                                    @Html.ValidationMessageFor(x => x.LocCode)
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <label class="col-md-6" style="padding:0px !important">Invoice No</label>
                                    <div class="input-group form-group col-md-6" style="padding-left:1px;">
                                        <input type="text" class="form-control" id="SaleNo" name="SaleNo" value="@ViewBag.InvNo" />
                                        @Html.ValidationMessageFor(x => x.SaleNo)
                                        @Html.HiddenFor(x => x.SalesMainID)
                                        @Html.HiddenFor(x => x.Vat)
                                        @Html.HiddenFor(x => x.Discount)
                                        @Html.HiddenFor(x => x.ExtQty)
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="col-md-4" style="padding:5px !important">Invoice Date</label>
                                    <div class="input-group form-group col-md-8">
                                        <input type="text" class="form-control datePage" id="@Html.IdFor(x => x.SaleDate)" value="@DateTime.Today.ToShortDateString()">
                                        <span class="input-group-addon bg-primary b-0 text-white"><i class="ion-calendar"></i></span>

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label class="col-md-3 required">Customer</label>
                                <div class="input-group form-group col-md-9">
                                    @Html.DropDownListFor(x => x.CustCode, null, "---- Select ----", new { @class = "form-control select2", @Value = ViewBag.CustCode })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label class="col-md-3"></label>
                                <div class="col-md-8 checkbox checkbox-primary">
                                    <input type="checkbox" name="AddInCust" class="AddInCust" value="1" id="AddInCust" /><label>Add In Customer</label>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label class="col-md-3">Item Type</label>
                                <div class="input-group form-group col-md-9">
                                    @Html.DropDownListFor(x => x.ItemType, null, "---- Select ----", new { @class = "form-control select2", @Value = ViewBag.ItemType })
                                    @Html.ValidationMessageFor(x => x.ItemType)
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label class="col-md-3 required">Item</label>
                                <div class="input-group form-group col-md-9">
                                    @Html.DropDownListFor(x => x.ItemCode, null, new { @class = "form-control select2", @Value = ViewBag.ItemCode })
                                    @Html.ValidationMessageFor(x => x.ItemCode)
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <label class="col-md-6 required" style="padding:0px !important">Sold Qty</label>
                                    <div class="input-group form-group col-md-6">
                                        @Html.TextBoxFor(x => x.SaleQty, new { @type = "number", @class = "form-control col-md-8 select2", required = "required" })
                                        @Html.ValidationMessageFor(x => x.SaleQty)
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="col-md-6 required">Unit Price</label>
                                    <div class="input-group form-group col-md-6">
                                        @Html.TextBoxFor(x => x.UnitPrice, new { @type = "number", @class = "form-control col-md-8 select2", required = "required" })
                                        @Html.ValidationMessageFor(x => x.UnitPrice)
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-9">
                                    <label class="col-md-4">Description</label>
                                    <div class="input-group form-group col-md-7">
                                        @Html.TextBoxFor(x => x.Description, new { @class = "form-control col-md-8 select2" })

                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="col-md-12">
                                        <input type="button" class="btn btn-primary" value="Add" id="btnAdd" style="float:right;" />

                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12" style="margin-bottom:5px !important">
                                <div class="col-md-3"></div>
                                <fieldset>
                                    <legend>Lot</legend>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-7">
                                        <div class="col-md-6">
                                            <div class="col-md-7 radio radio-default" style="margin:2px 0px 2px 0px !important">
                                                <input type="radio" name="LOT" class="AutoLot" value="AutoLot" id="AutoLot" /><label>Automatically</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="col-md-8 radio radio-default" style="margin:2px 0px 2px 0px !important">
                                                <input type="radio" name="LOT" class="ManualLot"  value="ManualLot" id="ManualLot" /><label>Manually</label>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <label class="col-md-6" style="padding:0px !important">Labour</label>
                                    <div class="input-group form-group col-md-6">
                                        @Html.TextBoxFor(x => x.Labour, new { @type = "number", @class = "form-control col-md-8 select2", required = "required" })
                                        @Html.ValidationMessageFor(x => x.Labour)
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="col-md-6">Transport</label>
                                    <div class="input-group form-group col-md-6">
                                        @Html.TextBoxFor(x => x.Transport, new { @type = "number", @class = "form-control col-md-8 select2", required = "required" })
                                        @Html.ValidationMessageFor(x => x.Transport)
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label class="col-md-3">Remarks</label>
                                <div class="input-group form-group col-md-9">
                                    @Html.TextAreaFor(x => x.Remarks, new { @class = "form-control col-md-8 select2" })
                                    @Html.ValidationMessageFor(x => x.Remarks)
                                </div>
                            </div>
                            @using (Html.BeginForm("SalePreviewPdf", "Sales", FormMethod.Post, new { target = "_blank" }))
                            {
                                <div class="col-md-12">
                                    <label class="col-md-3 required">Copy</label>
                                    <div class="input-group form-group  col-md-9">
                                        <div class=" col-md-3" style="padding-left:0px !important">
                                            @Html.TextBoxFor(x => x.CopyQty, new { @type = "number", @class = "form-control col-md-12 select2", required = "required" })
                                        </div>
                                        <div class="col-md-6">
                                            <select name="CopyType" id="CopyType" class="form-control col-md-12" style="float:right">
                                                <option value="1">Invoice & Challan</option>
                                                <option value="2">Invoice</option>
                                                <option value="3">Challan</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row col-md-12" style="text-align:end">
                                    <input type="hidden" id="sNo" name="sNo" />
                                    <input type="submit" value="Preview" class="btn btn-primary" id="btnPreview" style="width:100px; margin-right:0px" />
                                    <input type="button" value="Save" class="btn btn-primary" id="btnSave" style="width:100px;" />
                                    <input type="button" value="Update" class="btn btn-primary hidden" id="btnUpdate" style="width:100px;" />
                                    <input type="button" value="Clear" class="btn btn-primary" id="btnClear" style="width:100px;" />
                                </div>
                            }
                            @*<div class="col-md-12">
                                    <label class="col-md-3"></label>
                                    <div class="col-md-8"></div>
                                </div>*@
                        </div>
                        <div class="col-md-6">
                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <label class="col-md-4">Ref No</label>
                                    <div class="input-group form-group col-md-8">
                                        @Html.TextBoxFor(x => x.RefNo, new { @class = "form-control col-md-8 select2", required = "required" })
                                        @Html.ValidationMessageFor(x => x.RefNo)
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="col-md-4">Ref Date</label>
                                    <div class="input-group form-group col-md-8">
                                        <input type="text" class="form-control datePage" id="@Html.IdFor(x => x.RefDate)" value="@DateTime.Today.ToShortDateString()">
                                        <span class="input-group-addon bg-primary b-0 text-white"><i class="ion-calendar"></i></span>

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <label class="col-md-4 required" style="padding:0 !important">Challan No</label>
                                    <div class="input-group form-group col-md-8">
                                        <input type="text" class="form-control" id="IssueNo" name="IssueNo" value="@ViewBag.SaleNo" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="col-md-4" style="padding:0px !important">Challan Date</label>
                                    <div class="input-group form-group col-md-8">
                                        <input type="text" class="form-control datePage" id="@Html.IdFor(x => x.SaleDate)" value="@DateTime.Today.ToShortDateString()">
                                        <span class="input-group-addon bg-primary b-0 text-white"><i class="ion-calendar"></i></span>

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <label class="col-md-4">Voucher No1</label>
                                    <div class="col-md-8" style="padding: 0px !important;">
                                        <input class="form-control" id="VchrNo" name="VchrNo" type="text" value="@ViewBag.VchrNo">
                                        <span class="field-validation-valid" data-valmsg-for="VchrNo" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="col-md-4">Voucher No2</label>
                                    <div class="col-md-8">
                                        <input class="form-control" id="IssVchrNo" name="IssVchrNo" type="text" value="@ViewBag.IssVchrNo">
                                        <span class="field-validation-valid" data-valmsg-for="IssVchrNo" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-12" style="margin-top: 10px; margin-bottom: 10px;">
                                <div class="row col-sm-12 col-md-12" style="border:1px solid; border-color:#adcceb; width:100%">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-12" style="padding:1px 18px 1px 18px">
                                            <br />
                                            <table class="table table-bordered table-responsive" id="Add-datatable" style="width:100%">
                                                <thead>
                                                    <tr>
                                                        <th width="5%">SL</th>
                                                        <th width="40%">Item&nbsp;Name</th>
                                                        <th width="5%">Description</th>
                                                        <th width="5%">Qty</th>
                                                        <th width="5%">VAT</th>
                                                        <th width="5%">Discount</th>
                                                        <th width="5%">Amount</th>
                                                        <th width="5%">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tbodyId"></tbody>

                                            </table>
                                            <br />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-bottom:10px">
                                <button id="btnPackingListModal" data-toggle="modal" class="btn">Packing List</button> &ensp; &ensp;
                                <button id="btnSaleReturnRecveModal" data-toggle="modal" class="btn">Sales Return</button>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="col-md-2">
                            <label>Total Amount</label>
                            <div class="input-group form-group col-md-12">
                                @Html.TextBoxFor(x => x.TotSaleAmt, new { @class = "form-control col-md-8 select2", required = "required", disabled = "true" })
                            </div>
                        </div>
                        <div class="col-md-2">
                            <label>VAT Amount</label>
                            <div class="input-group form-group col-md-12">
                                @Html.TextBoxFor(x => x.VATAmt, new { @class = "form-control col-md-8 select2", required = "required", disabled = "true" })
                            </div>
                        </div>
                        <div class="col-md-2">
                            <label>Discount Amount</label>
                            <div class="input-group form-group col-md-12">
                                @Html.TextBoxFor(x => x.DiscAmt, new { @class = "form-control col-md-8 select2", required = "required", disabled = "true" })
                            </div>
                        </div>
                        <div class="col-md-2">
                            <label>Additional Amount</label>
                            <div class="input-group form-group col-md-12">
                                @Html.TextBoxFor(x => x.AdditionalAmt, new { @class = "form-control col-md-8 select2", required = "required", disabled = "true" })
                            </div>
                        </div>
                        <div class="col-md-2">
                            <label>Net Sale Amount</label>
                            <div class="input-group form-group col-md-12">
                                <input type="text" id="NetSaleAmt" class="form-control" disabled="disabled" />
                            </div>
                        </div>
                        <div class="col-md-2">
                            <label>Previous Due</label>
                            <div class="input-group form-group col-md-12">
                                @Html.TextBoxFor(x => x.PrevDue, new { @class = "form-control col-md-8 select2", required = "required", disabled = "true" })
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="col-md-10"></div>
                        <div class="col-md-2">
                            <label>Net Payable</label>
                            <div class="input-group form-group col-md-12">
                                @Html.TextBoxFor(x => x.NetAmount, new { @class = "form-control col-md-8 select2", required = "required", disabled = "true" })
                            </div>
                        </div>
                    </div>

                    @*//Packing list Modal*@
                    <div class="modal fade bd-example-modal-lg " tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" id="PackingListModal" data-backdrop="static" data-keyboard="false">
                        <div class="modal-dialog modal-md">
                            <div class="modal-content">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="panel panel-color panel-primary">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Packing List</h3>
                                            </div>
                                            <div class="panel-body">
                                                <div class="col-md-12">
                                                    <label class="col-md-2 required">Item</label>
                                                    <div class="input-group form-group col-md-9">
                                                        @Html.DropDownListFor(x => x.ItemCode, null, new { @class = "form-control select2", @Value = ViewBag.ItemCode })
                                                        @Html.ValidationMessageFor(x => x.ItemCode)
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-6">
                                                        <label class="col-md-4 required">Pack Size</label>
                                                        <div class="input-group form-group col-md-8">
                                                            @Html.TextBoxFor(x => x.PackSize, new { @class = "form-control col-md-8 select2", required = "required" })
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="col-md-3">Pcs</label>
                                                        <div class="input-group form-group col-md-7">
                                                            @Html.TextBoxFor(x => x.PackPcs, new { @class = "form-control col-md-8 select2", required = "required" })
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <label class="col-md-2 required">Pack Item</label>
                                                    <div class="input-group form-group col-md-9">
                                                        @Html.DropDownListFor(x => x.PackItemCode, null, new { @class = "form-control select2", @Value = ViewBag.ItemCode })
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="col-md-4"></label>
                                                    <div class="input-group form-group col-md-7">
                                                        <input type="button" class="btn btn-primary" value="Add" id="btnPackListAdd" style="margin-bottom:0px !important" />
                                                    </div>
                                                </div>


                                                @*Packing list DataTable*@
                                                <div class="col-sm-12 col-md-12" style="margin-top: 10px; margin-bottom: 10px;">
                                                    <div class="row col-sm-12 col-md-12" style="border:1px solid; border-color:#adcceb; width:100%">
                                                        <div class="row">
                                                            <div class="col-sm-12 col-md-12" style="padding:1px 18px 1px 18px">
                                                                <br />
                                                                <table class="table table-bordered table-responsive" id="PackListDtable" style="width:100%">
                                                                    <thead>
                                                                        <tr>
                                                                            <th width="5%">SL</th>
                                                                            <th width="40%">Item</th>
                                                                            <th width="5%">Pack&nbsp;Size</th>
                                                                            <th width="5%">Pcs</th>
                                                                            <th width="5%">Total&nbsp;Qty.</th>
                                                                            <th width="5%">Packet</th>
                                                                            <th width="5%">Packet&nbsp;Lot</th>
                                                                            <th width="5%">Action</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody id="tbodyId"></tbody>

                                                                </table>
                                                                <br />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row col-md-12">
                                                    <div class="col-md-12">
                                                        <input type="button" value="Create" class="btn btn-primary" id="btnPackListCreate" />
                                                        <input type="button" value="Load" class="btn btn-primary" id="btnPackListLoad" />
                                                        <input type="button" value="Close" class="btn btn-primary" id="btnPackListclose" />
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    @*//Packing list Modal*@
                    <div class="modal fade bd-example-modal-lg " tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" id="SaleReturnRecveModal" data-backdrop="static" data-keyboard="false">
                        <div class="modal-dialog modal-md">
                            <div class="modal-content">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="panel panel-color panel-primary">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Sales Return/Receive</h3>
                                            </div>
                                            <div class="panel-body">
                                                <div class="col-md-12">
                                                    <label class="col-md-2 required">Item</label>
                                                    <div class="input-group form-group col-md-9">
                                                        @Html.DropDownListFor(x => x.ItemCode, null, new { @class = "form-control select2", @Value = ViewBag.ItemCode })
                                                        @Html.ValidationMessageFor(x => x.ItemCode)
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-6">
                                                        <label class="col-md-4 required">Pack Size</label>
                                                        <div class="input-group form-group col-md-8">
                                                            @Html.TextBoxFor(x => x.PackSize, new { @class = "form-control col-md-8 select2", required = "required" })
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="col-md-3">Pcs</label>
                                                        <div class="input-group form-group col-md-7">
                                                            @Html.TextBoxFor(x => x.PackPcs, new { @class = "form-control col-md-8 select2", required = "required" })
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <label class="col-md-2 required">Pack Item</label>
                                                    <div class="input-group form-group col-md-9">
                                                        @Html.DropDownListFor(x => x.PackItemCode, null, new { @class = "form-control select2", @Value = ViewBag.ItemCode })
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="col-md-4"></label>
                                                    <div class="input-group form-group col-md-7">
                                                        <input type="button" class="btn btn-primary" value="Add" id="btnSaleReturnRecveAdd" style="margin-bottom:0px !important" />
                                                    </div>
                                                </div>


                                                @*Packing list DataTable*@
                                                <div class="col-sm-12 col-md-12" style="margin-top: 10px; margin-bottom: 10px;">
                                                    <div class="row col-sm-12 col-md-12" style="border:1px solid; border-color:#adcceb; width:100%">
                                                        <div class="row">
                                                            <div class="col-sm-12 col-md-12" style="padding:1px 18px 1px 18px">
                                                                <br />
                                                                <table class="table table-bordered table-responsive" id="SaleReturnDtable" style="width:100%">
                                                                    <thead>
                                                                        <tr>
                                                                            <th width="5%">SL</th>
                                                                            <th width="40%">Item</th>
                                                                            <th width="5%">Pack&nbsp;Size</th>
                                                                            <th width="5%">Pcs</th>
                                                                            <th width="5%">Total&nbsp;Qty.</th>
                                                                            <th width="5%">Packet</th>
                                                                            <th width="5%">Packet&nbsp;Lot</th>
                                                                            <th width="5%">Action</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody id="tbodyId"></tbody>

                                                                </table>
                                                                <br />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row col-md-12">
                                                    <div class="col-md-12">
                                                        <input type="button" value="Create" class="btn btn-primary" id="btnPackListCreate" />
                                                        <input type="button" value="Load" class="btn btn-primary" id="btnPackListLoad" />
                                                        <input type="button" value="Close" class="btn btn-primary" id="btnSaleReturnRecveClose" />
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@section scripts{
    <script src="~/App_Themes/Theme1/plugins/select2/select2.min.js" type="text/javascript"></script>
    <script src="~/App_Themes/Theme1/plugins/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/dataTables.bootstrap.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/dataTables.buttons.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/buttons.bootstrap.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/pdfmake.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/vfs_fonts.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/buttons.html5.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/buttons.print.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/dataTables.fixedHeader.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/dataTables.keyTable.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/dataTables.responsive.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/responsive.bootstrap.min.js"></script>
    <script src="../App_Themes/Theme1/plugins/datatables/dataTables.scroller.min.js"></script>
    <script type="text/javascript" src="../App_Themes/Theme1/plugins/parsleyjs/dist/parsley.min.js"></script>
    <script src="../App_Themes/Theme1/blue/assets/pages/datatables.init.js"></script>


    <script>

        $(document).ready(function () {

            function select2Focus() {
                var select2 = $(this).data('select2');
                setTimeout(function () {
                    if (!select2.opened()) {
                        select2.open();
                    }
                }, 0);
            }

            //$("input:text:visible:first").focus();
            $("#LocCode").select2().one('select2-focus', select2Focus).on("select2-blur", function () { $(this).one('select2-focus', select2Focus) });
            $("#CustCode").select2().one('select2-focus', select2Focus).on("select2-blur", function () { $(this).one('select2-focus', select2Focus) });
            $("#ItemType").select2().one('select2-focus', select2Focus).on("select2-blur", function () { $(this).one('select2-focus', select2Focus) });
            //$("#GroupID").select2().one('select2-focus', select2Focus).on("select2-blur", function () { $(this).one('select2-focus', select2Focus) });
            //$("#SGroupID").select2().one('select2-focus', select2Focus).on("select2-blur", function () { $(this).one('select2-focus', select2Focus) });
            //$("#SSGroupID").select2().one('select2-focus', select2Focus).on("select2-blur", function () { $(this).one('select2-focus', select2Focus) });
            $("#ItemCode").select2().one('select2-focus', select2Focus).on("select2-blur", function () { $(this).one('select2-focus', select2Focus) });
            $("#CopyType").select2().one('select2-focus', select2Focus).on("select2-blur", function () { $(this).one('select2-focus', select2Focus) });

            $("#Adjment").val(0);
            $("#Labour").val(0);
            $("#Transport").val(0);
            $("#PrevDue").val(0);
            $("#AdditionalAmt").val(0);
            $("#NetSaleAmt").val(0);
            $("#NetAmount").val(0);
            $("#SaleQty").val(0);
            $("#UnitPrice").val(0);
            $("#CopyQty").val(1);
            function GetSaleNo() {
                var SaleNo = $("#SaleNo").val();
                return SaleNo;
            }
            $('#Add-datatable').dataTable({
                "scrollY": 200,
                "scrollX": true,
                "destroy": true,
                "crossDomain": true,
                //"ajax": "../Sales/GetDatatableOnly?SaleNo=" + SaleNo,
                "ajax": {
                    "url": "../Sales/GetDatatableOnly",
                    "type": "GET",
                    "datatype": "json",
                    "data": function (d) {
                        d.SaleNo = GetSaleNo();
                    }
                },

                "columns": [
                           { "data": null, "bSortable": false },
                           { "data": "ItemName" },
                           { "data": "Description" },
                           { "data": "Qty" },
                           { "data": "Vat" },
                           { "data": "Discount" },
                           { "data": "Amount" },
                           {
                               mRender: function (data, type, row) {
                                   return '<a href="#" class="on-default remove-row deleteSup" data-id="1" id="edit" value="' + row.ID + '"><i class="glyphicon glyphicon-edit"></i></a>&emsp;<a href="#" class="on-default remove-row deleteSup largeSpace" data-id="1" id="delete" value="' + row.ID + '">'
                                           + ' <i class="glyphicon glyphicon-trash"></i> </a> '
                               }
                           }
                ],
                order: [0, 'asc'],
                select: {
                    style: 'os'
                },
                "columnDefs": [
                            {
                                "targets": 1,
                                "visible": false,
                                "searchable": false
                            },
                            {
                                "targets": 2,
                                "className": "text-left",
                            },
                            {
                                "targets": 3,
                                "className": "text-right",
                            },
                            {
                                "targets": 4,
                                "className": "text-right",
                            },
                            {
                                "targets": 6,
                                "className": "text-right",
                            }, {
                                "targets": 5,
                                "className": "text-right",
                            }], fixedColumns: true,

                "fnCreatedRow": function (row, data, index) {
                    $('td', row).eq(0).html(index + 1);
                }
            });

            $(document).on('click', '#btnPackingListModal', function () {
                $('#PackingListModal').modal('show');
            });
            $(document).on('click', '#btnPackListclose', function () {
                $('#PackingListModal').modal('hide');
            });
            $(document).on('click', '#btnSaleReturnRecveModal', function () {
                $('#SaleReturnRecveModal').modal('show');
            });
            $(document).on('click', '#btnSaleReturnRecveClose', function () {
                $('#SaleReturnRecveModal').modal('hide');
            });

            //For GLEntries
            $("#GLEntries").click(function () {
                //Get the id of the selected item in dropdown
                var SaleDate = moment($('#SaleDate').val(), 'DD/MM/YYYY').format('MM/DD/YYYY').toString();

                var id = SaleDate + '&pageType=AR';

                //Replace the predifined QueryString param "xxx" with the "id"
                this.href = this.href.replace("blankDate", id);
            });


            $("#glPro").click(function () {
                //Get the id of the selected item in dropdown
                var SaleDate = moment($('#SaleDate').val(), 'DD/MM/YYYY').format('MM/DD/YYYY').toString();

                var id = SaleDate + '&pageType=AR';

                //Replace the predifined QueryString param "xxx" with the "id"
                this.href = this.href.replace("blankDate", id);
            });


        }); //End Ready

    </script>
}
